[{"title":"博客优化(2)","url":"%2F2019%2F03%2F07%2F%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96-2%2F","content":"\n \n\n#### 首页文章间距过款\n\n打开`\\themes\\next\\source\\css\\_schemes\\Mist\\_posts-expanded.styl` ，在最后一行添加\n\n```\nposts-expand .post {\n  margin-top: 30px;\n  margin-bottom: 30px;\n}\n```\n\n\n\n#### 显示文章字数统计,阅读时长,总字数\n\ncd 到站点根目录下\n\n```\n$ npm i --save hexo-wordcount\n```\n\n打开站点(hexo)的_config.yml，添加\n\n```\nsymbols_count_time:\n  symbols: true\n  time: true\n  total_symbols: true\n  total_time: false\n```\n\n打开 `themes/next/_config.yml` ，搜索关键字 `post_wordcount`：\n\n```\nsymbols_count_time:\n  separated_meta: true\n  item_text_post: true\n  item_text_total: true\n  awl: 4\n  wpm: 275\n```\n\n### 27. 实现点击出现桃心效果\n\ncd 进 路径 `/themes/next/source/js/src` \n\n新建(touch love.js)并将以下代码复制进去并保存：\n\n```\n!function(e,t,a){function n(){c(\".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}\"),o(),r()}function r(){for(var e=0;e<d.length;e++)d[e].alpha<=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=\"left:\"+d[e].x+\"px;top:\"+d[e].y+\"px;opacity:\"+d[e].alpha+\";transform:scale(\"+d[e].scale+\",\"+d[e].scale+\") rotate(45deg);background:\"+d[e].color+\";z-index:99999\");requestAnimationFrame(r)}function o(){var t=\"function\"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),i(e)}}function i(e){var a=t.createElement(\"div\");a.className=\"heart\",d.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()}),t.body.appendChild(a)}function c(e){var a=t.createElement(\"style\");a.type=\"text/css\";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName(\"head\")[0].appendChild(a)}function s(){return\"rgb(\"+~~(255*Math.random())+\",\"+~~(255*Math.random())+\",\"+~~(255*Math.random())+\")\"}var d=[];e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(),n()}(window,document);\n```\n\n然后打开 `\\themes\\next\\layout\\_layout.swig` 文件,在末尾（在前面引用会出现找不到的bug）添加以下代码：\n\n```\n<!-- 页面点击小红心 -->\n<script type=\"text/javascript\" src=\"/js/src/love.js\"></script>\n```\n\n","tags":["Hexo"]},{"title":"Hexo v3.8.0 +NexT.Mist v7.0.1  博客优化(1)","url":"%2F2019%2F03%2F06%2FHexo%20v3.8.0%20%2BNexT.Mist%20v7.0.1%20%20%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96%2F","content":"\n#### 给网站加上问答机器人\n\n第一种方法，由于不会前端方面的知识，就直接在socia引入url取个巧吧，等以后学会JavaScript之后再写个聊天界面接入网页中吧;\n\n另外一种方法是新建一个page , hexo new page \"robot\",在根目录下产生一个robot文件夹,删除里面的index.md,然后在根目录下的public文件夹里新建一个robot文件夹，将index.html文件拷贝进去（html+css+javascript),hexo g hexo d,这也是自定义网页的方法，不过hexo clean后，public文件夹就会被清理，所以要备份你自定义的index.html文件。\n\n为了节省menu,我也把这个网页设成网址放在social里,不过每天回答的次数有限制。。。。\n\n#### 网页中插入音乐外链播放器-----layout/_macro/sidebar.swig文件\n\n网页云音乐由于版权问题无法生成外链播放器，故选取猫耳FM\n\n外链HTML代码贴在想要放的位置，我把它放在尺寸自动播放代码里可以调\n\n我把它插在侧边栏里，对应在layout/_macro/sidebar.swig文件里\n\n```html\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=\"310\" height=\"300\" src=\"https://www.missevan.com/albumiframe/1861550?autoplay=false&playlist=true\"></iframe>\n```\n\n\n\n#### 首页文章不全文显示，调成预览模式 \n\n##### 方法1主题配置文件\n\n进入hexo博客项目的themes/next目录\n\n用文本编辑器打开_config.yml文件\n\n搜索\"auto_excerpt\",改为true以及设置显示长度\n\n##### 方法2 在你想要截断的地方加符号\n\n用md写的话，在文章里加<!1-- more --> 会自动截断（我加1是为了不以这结尾）\n\n\n\n#### 主页文章添加阴影效果\n\n就是文章外面那个框框\n\n打开`\\themes\\next\\source\\css\\_custom\\custom.styl`,向里面加入：\n\n```\n .post {\n   margin-top: 60px;\n   margin-bottom: 60px;\n   padding: 25px;\n   -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);\n   -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);\n```\n\n\n\n#### 文章出现两次阅读次数——leancloud和busuanzi重复的原因\n\n1、leancloud(true时首页预览模式和文章页均可看到阅读次数)\n\n主题_config.yml文件 设置 visitor: false\n\nvaline:\n  ...\n  visitor: false\n\n2、busuanzi(true时预览模式阅读次数不可见)\n\n主题_config.yml文件 设置post_views: false\n\nbusuanzi_count:\n  ....\n  post_views: false\n  post_views_icon:  eye\n\n\n\n#### 底部\n\n##### 隐藏由Hexo强力驱动、主题--NexT.Mist\n\n打开`Blog/themes/next/layout/_partials/footer.swig`，注释掉相应代码。\n\n```\n<!--代码 -->\n```\n\n```swig\n<!--\n<span class=\"post-meta-divider\">|</span>\n\n{% if theme.footer.powered %}\n  <div class=\"powered-by\">{#\n  #}{{ __('footer.powered', '<a class=\"theme-link\" target=\"_blank\" href=\"https://hexo.io\">Hexo</a>') }}{#\n#}</div>\n{% endif %}\n\n{% if theme.footer.powered and theme.footer.theme.enable %}\n  <span class=\"post-meta-divider\">|</span>\n{% endif %}\n\n{% if theme.footer.theme.enable %}\n  <div class=\"theme-info\">{#\n  #}{{ __('footer.theme') }} &mdash; {#\n  #}<a class=\"theme-link\" target=\"_blank\" href=\"https://github.com/iissnan/hexo-theme-next\">{#\n    #}NexT.{{ theme.scheme }}{#\n  #}</a>{% if theme.footer.theme.version %} v{{ theme.version }}{% endif %}{#\n#}</div>\n{% endif %}\n\n{% if theme.footer.custom_text %}\n  <div class=\"footer-custom\">{#\n  #}{{ theme.footer.custom_text }}{#\n#}</div>\n{% endif %}\n-->\n```\n\n##### 添加底部桃心\n\n打开`Blog/themes/next/layout/_partials/footer.swig`搜索`with-love`，改成如下\n\n```\n <span class=\"with-love\" id=\"animate\">\n<i class=\"fa fa-heart\" aria-hidden=\"true\"></i>\n```\n\n ","tags":["Hexo"]}]